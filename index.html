<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <title>VueComponentTest</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css">
    </head>
    <body>
		<div id="app">
                    <chat-box v-for="chat in chats":message="chat.message" :peer-id="chat.peerId"></chat-box>
		</div>
        <script src="https://unpkg.com/vue@next"></script>
        <script>
            // Vue アプリケーションを作成します
            const data={
                chats:[
                    {
                        message:"jagaimodesune",
                        peerId:"jaga102"
                    },
                    {
                        message:"iiepotetodesu",
                        peerId:"pote23"
                    },
                    {
                        message:"haa",
                        peerId:"jaga102"
                    },
                    {
                        message:"...",
                        peerId:"pote23"
                    }
               ]
            };
            const app = Vue.createApp({
                data(){
                    return data;
                }
            });
            // グローバルな chat-box というコンポーネントを定義します
            app.component('chat-box', {
              props:{
                message:{
                    type:String,
                    default:'',
                    required:false
                },
                own:{
                    type:Boolean,
                    default:false,
                    required:false
                },
                peerId:{
                    type:String,
                    default:'',
                    required:true
                },
                base64:{
                    type:String,
                    default:'',
                    required:false
                }
              },
              template: `
                <div style="background-color: green">
                    <h3 style="color: white">{{peerId}}</h3>
                    <h2 style="color: white">{{message}}</h2>
                    <a></a>
                </div>`
            });
            app.mount('#app');
            setInterval(()=>chats.push({message:"hoeee",peerId:"other"}));
        </script>
    </body>
</html>
